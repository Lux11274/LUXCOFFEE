document.addEventListener("DOMContentLoaded", function () {
    // Dark Mode Toggle
    const darkModeToggle = document.getElementById("dark-mode-toggle");
    const body = document.body;
    
    if (localStorage.getItem("darkMode") === "enabled") {
        body.classList.add("dark-mode");
    }

    darkModeToggle.addEventListener("click", function () {
        body.classList.toggle("dark-mode");
        localStorage.setItem("darkMode", body.classList.contains("dark-mode") ? "enabled" : "disabled");
    });

    // Signup and Login System
    function showSignup() {
        document.getElementById("login-screen").style.display = "none";
        document.getElementById("signup-screen").style.display = "block";
    }

    function showLogin() {
        document.getElementById("signup-screen").style.display = "none";
        document.getElementById("login-screen").style.display = "block";
    }

    function createAccount() {
        let username = document.getElementById("new-username").value;
        let password = document.getElementById("new-password").value;

        if (username && password) {
            localStorage.setItem(username, password);
            alert("Account created successfully!");
            showLogin();
        } else {
            alert("Please enter a valid username and password.");
        }
    }

    function login() {
        let username = document.getElementById("username").value;
        let password = document.getElementById("password").value;

        if (localStorage.getItem(username) === password) {
            document.getElementById("login-screen").style.display = "none";
            document.getElementById("signup-screen").style.display = "none";
            document.getElementById("main-content").style.display = "block";
            document.getElementById("profile-username").textContent = username;
        } else {
            alert("Invalid credentials! Try again.");
        }
    }

    // Cart System
    let cart = [];

    function addToCart(item) {
        cart.push(item);
        alert(`${item} added to cart!`);
    }

    function viewCart() {
        alert(cart.length ? `Cart: ${cart.join(", ")}` : "Your cart is empty!");
    }

    // Expose functions globally
    window.showSignup = showSignup;
    window.showLogin = showLogin;
    window.createAccount = createAccount;
    window.login = login;
    window.addToCart = addToCart;
    window.viewCart = viewCart;
});
